# MeshKit 用户使用手册

欢迎使用 MeshKit！这是一份面向普通用户的完整使用指南。

## 目录

- [快速入门](#快速入门)
- [文件传输](#文件传输)
- [便签墙](#便签墙)
- [加密聊天](#加密聊天)
- [设置配置](#设置配置)
- [常见问题](#常见问题)
- [使用技巧](#使用技巧)

---

## 快速入门

### 什么是 MeshKit？

MeshKit 是一个**安全的 P2P 局域网协作工具**，让你可以在同一 WiFi 下的设备之间：
- **加密传输文件**（WebRTC DTLS/SRTP 加密，不需要 U 盘、云盘）
- **安全共享便签**（WebRTC 加密传输，团队头脑风暴）
- ️ **端到端加密聊天**（256位军事级加密，绝对隐私）

### 为什么选择 MeshKit？

**隐私优先**
- 数据不上传服务器，完全 P2P 传输
- 所有通信均经过加密
- 加密聊天采用端到端加密 (E2EE)
- 本地存储，数据掌握在自己手中

**技术保障**
- WebRTC DTLS/SRTP 传输层加密
- libsodium (NaCl) 军事级端到端加密
- ️ 256位密钥，完美前向保密 (PFS)
- 零服务器存储，消息不经过第三方

### 第一次使用

#### 1. 打开应用

**Web 版：**
```
在浏览器中访问：http://localhost:3000
或其他设备上：http://[电脑IP]:3000
```

**Desktop 版：**
```
双击桌面图标或从开始菜单启动
```

#### 2. 连接到同一 WiFi

确保所有设备连接到**同一个 WiFi 网络**。

#### 3. 等待设备发现

打开应用后，会自动发现同一网络下的其他设备。

---

## 文件传输

### 基本使用

#### 发送文件

1. **选择"文件传输"标签**
 - 点击顶部导航栏的"文件传输"

2. **切换到"发送"模式**
 - 点击" 发送"按钮

3. **选择文件**
 - 方式一：点击选择区域，选择文件
 - 方式二：直接拖拽文件到选择区域

4. **选择接收设备**
 - 在设备列表中选择目标设备
 - 设备显示为绿色表示在线

5. **发送**
 - 点击"发送文件"按钮
 - 等待传输完成

#### 接收文件

1. **选择"文件传输"标签**

2. **切换到"接收"模式**
 - 点击" 接收"按钮

3. **等待接收**
 - 当有文件传来时，会自动显示接收进度

4. **下载文件**
 - 传输完成后，点击"下载文件"按钮
 - 文件会保存到浏览器的下载文件夹

### 批量传输

**一次发送多个文件：**

1. 在文件选择框中，按住 `Ctrl`（Windows）或 `Cmd`（Mac）选择多个文件
2. 或者直接拖拽多个文件到选择区域
3. 文件会按顺序传输

**查看队列：**
- 传输时可以看到当前文件和队列中的文件
- 每个文件都有独立的进度显示

### 传输速度

**预期速度：**
- 良好 WiFi：20-50 MB/s
- 普通 WiFi：5-15 MB/s
- 差的 WiFi：1-5 MB/s

**提高速度的方法：**
1. 使用 5GHz WiFi（比 2.4GHz 快很多）
2. 靠近路由器
3. 减少其他设备的网络使用
4. 关闭 VPN 或代理

### iOS/iPadOS 特别说明

由于 Safari 的限制，下载文件步骤稍有不同：

1. 点击"下载文件"
2. 会打开新标签页显示文件
3. **长按**文件（重要！）
4. 选择"存储到文件"或"添加到照片"
5. 选择保存位置（如 iCloud 云盘）

---

## 便签墙

### 基本使用

#### 创建便签

1. **打开便签墙**
 - 点击顶部导航栏的"便签墙"

2. **添加便签**
 - 点击"+ 添加便签"按钮

3. **编辑内容**
 - 在弹出框中输入便签内容
 - 选择喜欢的颜色

4. **保存**
 - 点击"保存"按钮

#### 编辑便签

1. **点击便签**
 - 直接点击便签内容

2. **修改**
 - 修改文本内容
 - 更改颜色

3. **保存**
 - 点击"保存"

#### 删除便签

1. **选择便签**
 - 点击便签

2. **删除**
 - 点击"删除"按钮
 - 确认删除

#### 移动便签

1. **拖动便签**
 - 按住便签不放
 - 拖动到目标位置
 - 松开鼠标

### 多人协作

**实时同步：**
- 所有设备的便签会自动同步
- 一个设备创建/编辑便签，其他设备立即看到
- 支持多人同时编辑不同便签

**冲突处理：**
- 如果两人同时编辑同一便签，系统会自动合并
- 基于 CRDT 算法，保证数据一致性

**离线编辑：**
- 网络断开时仍可编辑
- 重新连接后自动同步

### 使用场景

**团队会议：**
1. 每人用不同颜色的便签
2. 实时记录想法和要点
3. 拖动整理分类

**头脑风暴：**
1. 快速记录创意
2. 所有人都能看到
3. 实时讨论和调整

**任务看板：**
1. 创建"待办"、"进行中"、"完成"区域
2. 用便签代表任务
3. 拖动便签表示状态变化

---

## 加密聊天

### 安全特性

MeshKit 加密聊天采用**军事级端到端加密 (E2EE)**，安全级别与 Signal、WhatsApp 相同。

**加密技术：**
- **libsodium (NaCl)**: 军事级加密库
- **256位密钥**: 当前技术无法破解
- ️ **完美前向保密**: 密钥泄露不影响历史消息
- **防篡改**: Poly1305 消息认证
- **防重放**: 192位随机 Nonce

**隐私保证：**
- 只有你和对方能解密消息
- 服务器无法窃听
- 消息不持久化，刷新即清空
- 数据不上传任何服务器

### 基本使用

#### 开始聊天

1. **打开加密聊天**
 - 点击顶部导航栏的"加密聊天"

2. **选择聊天对象**
 - 在设备列表中选择要聊天的设备
 - 等待连接建立（**自动交换加密密钥，使用 ECDH 算法**）
 - 连接建立后，所有消息自动加密

3. **发送消息**
 - 在底部输入框输入消息
 - 按 `Enter` 或点击发送按钮
 - 消息自动加密后发送

#### 查看消息

**消息显示：**
- 自己的消息：右侧蓝色气泡
- 对方的消息：左侧灰色气泡
- 显示发送时间
- 所有消息均已端到端加密

**在线状态：**
- 绿色圆点：对方在线
- 灰色圆点：对方离线

### 安全性说明

#### 端到端加密 (E2EE)
```
你的消息 → [256位加密] → 加密传输 → [256位解密] → 对方收到
 ↑ ↑
 只有你能加密 只有对方能解密
```

**技术细节：**
- **加密算法**: XSalsa20 流密码 (256位密钥)
- **消息认证**: Poly1305 (防篡改)
- **密钥交换**: ECDH (Curve25519 椭圆曲线)
- **随机保护**: 192位 Nonce (防重放攻击)

#### 完美前向保密 (PFS)
- 每次连接生成**全新密钥对**
- 即使未来密钥泄露，**历史消息仍安全**
- 每次重连自动更换密钥

#### 隐私保护
- 消息**不经过服务器**，直接 P2P 传输
- 消息**不保存到磁盘**，仅存在内存
- **刷新页面**后消息完全清空
- 服务器和第三方**无法窃听**
- ️ 注意：**本地截图**仍可能泄露内容

### 使用场景

**团队讨论：**
- 项目敏感信息讨论
- 避免信息泄露

**一对一沟通：**
- 私密聊天
- 传递密码、账号等敏感信息

**客户沟通：**
- 保护客户隐私
- 安全的商务沟通

---

## 设置配置

### 访问设置

点击右上角的 **️ 图标**

### 配置信令服务器

#### 为什么需要配置？

默认使用 `localhost`（本地），只适合开发测试。如果要在局域网多台电脑使用，需要配置。

#### 配置步骤

**1. 在一台电脑上启动信令服务器**

```bash
# 在命令行运行
pnpm dev:signaling
```

会显示：
```
WebSocket服务器运行在 ws://192.168.1.100:7000
PeerJS服务器运行在 http://192.168.1.100:8000
```

**2. 记下 IP 地址**

例如：`192.168.1.100`

**3. 在其他电脑的设置中填入**

- 服务器地址：`192.168.1.100`
- WebSocket 端口：`7000`
- PeerJS 端口：`8000`

**4. 保存并刷新/重启**

- Web 版：刷新浏览器
- Desktop 版：重启应用

#### 查看本机 IP

**Windows：**
```cmd
ipconfig
```
查看 "IPv4 地址"

**Mac：**
```bash
ifconfig
```
查看 "inet" 地址

**Linux：**
```bash
ip addr
```
或
```bash
ifconfig
```

---

## 常见问题

### 1. 看不到其他设备

**可能原因：**
- 设备不在同一 WiFi
- 信令服务器未启动
- 防火墙阻止连接

**解决方法：**
1. 确认所有设备连接同一 WiFi
2. 检查信令服务器是否运行
3. 关闭防火墙或添加例外
4. 重启应用

### 2. 文件传输很慢

**优化方法：**
1. 使用 5GHz WiFi
2. 靠近路由器
3. 减少其他设备使用网络
4. 关闭 VPN
5. 使用有线连接（如果可能）

### 3. 文件传输失败

**解决方法：**
1. 检查网络连接
2. 确认对方设备在线
3. 重新选择文件发送
4. 刷新页面重试

### 4. 便签不同步

**检查：**
1. 网络是否连接
2. 其他设备是否在线
3. 尝试创建新便签测试

**解决：**
1. 刷新页面
2. 检查 WebRTC 连接
3. 重启应用

### 5. 聊天连接失败

**解决方法：**
1. 确认对方在线
2. 刷新页面重新连接
3. 检查网络连接
4. 查看浏览器控制台错误

### 6. iOS Safari 无法下载

**正确步骤：**
1. 点击"下载文件"
2. 新标签页打开
3. **长按**文件（重要！）
4. 选择"存储到文件"
5. 选择保存位置

### 7. 电脑和手机无法连接

**检查：**
1. 是否连接同一 WiFi
2. 手机浏览器访问的 URL 是否正确
3. 电脑防火墙是否开放端口

**手机访问步骤：**
1. 查看电脑 IP（如 192.168.1.100）
2. 手机浏览器访问：`http://192.168.1.100:3000`
3. 等待设备发现

---

## 使用技巧

### 文件传输技巧

**1. 批量传输**
- 一次选择多个文件更高效
- 文件会按顺序自动传输

**2. 大文件传输**
- 支持 1GB+ 大文件
- 保持屏幕唤醒，避免传输中断
- 关闭省电模式

**3. 手机传照片**
- iOS：直接选择相册照片
- Android：使用文件管理器
- 支持一次选择多张

**4. 跨平台传输**
- 电脑 ↔ 手机
- Windows ↔ Mac
- 任意组合都支持

### 便签墙技巧

**1. 颜色管理**
- 用不同颜色区分类别
- 例如：黄色=想法，绿色=任务，红色=重要

**2. 区域划分**
- 左侧：待办
- 中间：进行中
- 右侧：完成

**3. 快速编辑**
- 双击便签快速编辑
- Enter 保存，Esc 取消

**4. 团队协作**
- 每人用固定颜色
- 便于识别谁创建的便签

### 加密聊天技巧

**1. 快速切换**
- 在设备列表快速切换聊天对象

**2. 复制粘贴**
- 支持从其他应用复制文本
- 粘贴到聊天框发送

**3. 表情符号**
- 支持 Emoji 表情
- Windows: `Win + .`
- Mac: `Cmd + Ctrl + Space`

**4. 多设备**
- 可以同时和多个设备聊天
- 每个聊天独立加密

### 通用技巧

**1. 键盘快捷键**
- `Ctrl/Cmd + R`: 刷新页面
- `F12`: 开发者工具（查看错误）
- `Ctrl/Cmd + W`: 关闭标签

**2. 保持连接**
- 不要让电脑进入睡眠
- 手机保持屏幕唤醒（传输时）
- 关闭省电模式

**3. 网络优化**
- 优先使用 5GHz WiFi
- 确保信号良好
- 减少其他应用网络使用

**4. 故障排除**
- 遇到问题先刷新页面
- 查看控制台错误信息
- 重启应用

---

## 实用场景示例

### 场景 1：会议快速分发文件

**需求：** 会议中需要给所有人发送 PPT

**步骤：**
1. 所有人打开 MeshKit
2. 主持人发送文件给第一个人
3. 第一个人收到后，同时发给其他人
4. 形成扩散传播，速度更快

### 场景 2：团队头脑风暴

**需求：** 团队讨论项目创意

**步骤：**
1. 所有人打开便签墙
2. 每人用自己的颜色添加想法
3. 实时看到所有人的想法
4. 讨论后整理归类（拖动分组）
5. 保留便签作为会议记录

### 场景 3：手机照片传电脑

**需求：** 把手机拍的照片快速传到电脑

**步骤：**
1. 电脑和手机连同一 WiFi
2. 两边都打开 MeshKit
3. 手机选择照片发送
4. 电脑接收并下载
5. 比数据线、微信、云盘都快

### 场景 4：敏感信息传递

**需求：** 给同事发送账号密码

**步骤：**
1. 打开加密聊天
2. 选择同事设备
3. 发送账号密码
4. 对方收到后立即使用
5. 消息不会保存，刷新即清空
6. 安全可靠

### 场景 5：远程技术支持

**需求：** 远程帮同事解决问题

**步骤：**
1. 加密聊天沟通问题
2. 文件传输发送修复工具
3. 便签墙记录操作步骤
4. 全程加密，保护隐私

---

## 获取帮助

### 遇到问题？

1. **查看常见问题** - 本文档"常见问题"部分
2. **查看控制台** - 按 F12，查看错误信息
3. **重启应用** - 很多问题重启可解决
4. **提交 Issue** - [GitHub Issues](https://github.com/cainiaopppppppp/MeshKit/issues)

### 需要新功能？

在 [GitHub Discussions](https://github.com/cainiaopppppppp/MeshKit/discussions) 提出建议

### 技术支持

- Email: [项目邮箱]
- 社区: [Discord/QQ群]
- 文档: [完整文档列表](../README.md#文档)

---

**祝你使用愉快！** 

如果觉得 MeshKit 好用，欢迎分享给朋友或 Star 项目 ⭐
